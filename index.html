<!DOCTYPE html>
	<head>
		<title>Bricks</title>
		<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
		<link rel="stylesheet" type="text/css" href="turtles.css">
	</head>
	<body style="text-align:center">
		<p>Use the "A" and "D" keys on your keboard! Clear all the block to win.</p>
		<p>Reload the page or "crtl" and "r" to restart! Use the inpect element console to race your friends. Who ever has the lower number of errors with all the blocks cleared wins! You can also write down your record in the console!</p>
	<canvas id="canvas" width="900" height="500"></canvas>
	
	
	
	
	
		<script>
	//CONSOLE LOG 
			console.log ("Hey! You found your way to the console! Congrats!");
			//BEGIN LIBRARY CODE
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Toolkit;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;
import javax.swing.JPanel;


public class GamePanel extends JPanel implements KeyListener {
    
    BufferedImage buffer;
    GameFrame gameFrame;
    
    Ball ball;
    Bat playerBat;
    Brick brick;
    boolean gameOver = false;

    public GamePanel()
    {
        setIgnoreRepaint(true);
        addKeyListener(this);
        setFocusable(true);
    }
    
    public void Initialize(){
        
        buffer = new BufferedImage(500, 600, BufferedImage.TYPE_INT_RGB);
        ball = new Ball(this, 100, 100, 3, 3);
        playerBat = new Bat(this, 0, 520, 65, 15, 5);
        brick = new Brick(this, 350, 100, 75, 20, true, true);
    }

    public void update(){
        ball.update();
        playerBat.update();
    }

    public void checkCollisions(){
        if (playerBat.getBounds().intersects(ball.getBounds())){
                ball.reverseY();
        } else if (ball.getBounds().intersects(brick.getBounds())) {
            brick.isAlive = false;
        } else {
            playerBat.collision = false;
        }
        
    }
    
    public void drawBuffer(){
        
        // setup the buffer
        Graphics2D b = buffer.createGraphics();
        
        // check if the game is over and post message to screen
        if(gameOver){
            b.setColor(Color.BLACK);
            b.drawString("GAME OVER", (buffer.getWidth()/2)-20, buffer.getHeight()/2);
            b.dispose();
        }
        
        // Setup Background Colour
        b.setColor(Color.CYAN);
        b.fillRect(0,0,500,600);
        
        // setup a temp brick
        if(brick.isAlive){
            b.setColor(Color.BLACK);
            b.fillRect(brick.x, brick.y, brick.width, brick.height);
        }
        
        // setup a red ball
        b.setColor(Color.RED);
        b.fillOval(ball.getX(), ball.getY(), ball.size, ball.size);
        
        // setup the players bat
        b.setColor(Color.WHITE);
        b.fillRect(playerBat.xLocation, playerBat.yLocation, playerBat.width, playerBat.height);
        
        // Disposes of this graphics context
        b.dispose();
        
    }
    
    public void drawScreen(){
        
        Graphics2D g = (Graphics2D)this.getGraphics();
        g.drawImage(buffer,0,0,this);
        Toolkit.getDefaultToolkit().sync();
        g.dispose();
        
    }

    public void startGame(){
        
        Initialize();
        while(!gameOver)
        {
            try
            {
                update();
                checkCollisions();
                drawBuffer();
                drawScreen();
                Thread.sleep(15);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }  
        }

        System.out.println("!!!GAME OVER!!!");
        
    }
    
    @Override
    public void keyTyped(KeyEvent e) {
        
    }

    @Override
    public void keyPressed(KeyEvent e) {
        
       int key = e.getKeyCode();
       
       if (key == KeyEvent.VK_LEFT)
           playerBat.left = true;
       if (key == KeyEvent.VK_RIGHT)
           playerBat.right = true;
    }

    @Override
    public void keyReleased(KeyEvent e) {
    
       int key = e.getKeyCode();
       
       if (key == KeyEvent.VK_LEFT)
           playerBat.left = false;
       if (key == KeyEvent.VK_RIGHT)
           playerBat.right = false;
    }

}

import java.awt.Rectangle;

public class Bat {
    
    GamePanel game;
    
    int width, height, xLocation, yLocation, speed;
    boolean left, right, collision;
    
    public Bat(GamePanel game, int x, int y, int width, int height, int speed){
        
        this.game = game;
        this.xLocation = x;
        this.yLocation = y;
        this.width = width;
        this.height = height;
        this.speed = speed;
    }
    
    public void update(){
        if (left)
            if (xLocation <= 0){ 
                xLocation = 0;
            } else {
                xLocation -= speed;
            }  
        if (right)
            if (xLocation >= game.getWidth()-width){
                xLocation = game.getWidth()-width;
            } else {
                xLocation += speed;
            }
    }
    
     // reverse the x direction
    public void reverseX(){
        xLocation *= -1;
    }
    
    // reverse the y direction
    public void reverseY(){
        yLocation *= -1;
    }
    
    public int getX(){
        return xLocation;
    }
    
    public int getY(){
        return yLocation;
    }
    
    public int getWidth(){
        return width;
    }
    
    public int getHeight(){
        return height;
    }
    
    public Rectangle getBounds()
    {
        return new Rectangle(getX(),getY(), getWidth(), getHeight());
    }
    
}

	</script>
</body>
